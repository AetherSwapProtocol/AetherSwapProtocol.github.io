<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AetherSwap - Popular Tokens</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(180deg, #0f0f0f 0%, #1e1e1e 100%);
      color: white;
      overflow-x: hidden;
    }
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
    }
    .chain-btn.selected {
      background-color: rgba(255,255,255,0.2);
      border: 1px solid white;
    }
  </style>
</head>
<body class="pb-20">

<!-- üîº Menu filtre temporel -->
<div class="w-full p-4 flex justify-between items-center sticky top-0 bg-black z-50">
  <h1 class="text-lg font-semibold">Popular Tokens</h1>
  <select id="timeFilter" class="bg-gray-800 text-white px-3 py-2 rounded-lg">
    <option value="1h">1 Hour</option>
    <option value="24h">24 Hours</option>
    <option value="7d">7 Days</option>
  </select>
</div>

<!-- üîÑ Bandeau horizontal scrollable blockchains -->
<div class="flex overflow-x-auto gap-2 px-4 py-3 scrollbar-hide">
  <button class="chain-btn px-4 py-2 rounded-full flex items-center gap-2 bg-gray-800 text-white text-sm" onclick="openChainPopup()">
    <span>All Chains</span>
  </button>
  <button class="chain-btn px-4 py-2 rounded-full flex items-center gap-2 bg-gray-800 text-white text-sm" onclick="selectChain('solana')">
    <img src="https://cryptologos.cc/logos/solana-sol-logo.png" class="w-4 h-4" />
    Solana
  </button>
  <button class="chain-btn px-4 py-2 rounded-full flex items-center gap-2 bg-gray-800 text-white text-sm" onclick="selectChain('ethereum')">
    <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" class="w-4 h-4" />
    Ethereum
  </button>
  <button class="chain-btn px-4 py-2 rounded-full flex items-center gap-2 bg-gray-800 text-white text-sm" onclick="selectChain('bnb')">
    <img src="https://cryptologos.cc/logos/bnb-bnb-logo.png" class="w-4 h-4" />
    BNB
  </button>
  <!-- ajoute d'autres chains ici -->
</div>
<!-- üìã Liste des tokens -->
<div id="tokenList" class="px-4 mt-4 flex flex-col gap-3">
  <!-- Exemple statique d‚Äôun token (sera dynamique plus tard) -->
  <div onclick="openTokenPopup('TokenX', '0x123456789', 'https://cryptologos.cc/logos/ethereum-eth-logo.png')" class="bg-gray-800 rounded-xl p-4 flex items-center justify-between cursor-pointer hover:bg-gray-700">
    <div class="flex items-center gap-3">
      <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" class="w-8 h-8 rounded-full" />
      <div>
        <p class="font-semibold text-sm">TokenX</p>
        <p class="text-xs text-gray-400">0x1234...6789</p>
      </div>
    </div>
    <span class="text-green-400 text-sm">+42%</span>
  </div>
</div>

<!-- üîç Popup Token D√©tail -->
<div id="tokenModal" class="fixed inset-0 z-50 bg-black bg-opacity-70 hidden flex items-center justify-center">
  <div class="glass p-6 w-80 rounded-xl relative">
    <button onclick="closeTokenPopup()" class="absolute top-2 right-2 text-white text-lg">‚úï</button>
    <div class="flex flex-col items-center gap-3">
      <img id="tokenImage" src="" class="w-14 h-14 rounded-full">
      <h2 id="tokenName" class="text-lg font-semibold">Token Name</h2>
      <p id="tokenAddress" class="text-sm text-gray-300 break-all text-center"></p>
      <button onclick="copyAddress()" class="bg-white text-black px-3 py-1 mt-1 rounded-lg text-sm">Copy Address</button>
      <a href="swap.html" class="bg-purple-600 text-white px-4 py-2 mt-3 rounded-full">Trade</a>
    </div>
  </div>
</div>

<!-- üîó Popup S√©lection de Blockchain -->
<div id="chainPopup" class="fixed inset-0 z-50 bg-black bg-opacity-70 hidden flex items-center justify-center">
  <div class="glass w-11/12 max-w-md p-6 rounded-xl relative">
    <button onclick="closeChainPopup()" class="absolute top-2 right-2 text-white text-lg">‚úï</button>
    <h2 class="text-xl font-semibold mb-4">Select or Paste Token Address</h2>
    <input type="text" id="chainSearch" oninput="handleChainSearch()" placeholder="Search or paste token address..." class="w-full p-3 rounded-lg bg-gray-800 text-white mb-4">
    <div id="chainSearchResult" class="text-sm text-gray-400">
      <!-- R√©sultat ou info dynamique -->
    </div>
  </div>
</div>
<!-- ‚¨áÔ∏è Barre de navigation basse fixe -->
<div class="fixed bottom-0 left-0 right-0 bg-black/50 backdrop-blur-md border-t border-white/10 flex justify-between px-4 py-2 z-50">
  <a href="index.html" class="flex-1 flex justify-center items-center text-white text-sm">üè† Home</a>
  <a href="popular.html" class="flex-1 flex justify-center items-center text-white text-sm">üî• Popular</a>

  <!-- Bouton central Trade -->
  <a href="swap.html" class="relative -top-6">
    <div class="w-16 h-16 bg-purple-600 rounded-full border-4 border-black flex items-center justify-center text-white text-xl shadow-lg">‚áÑ</div>
  </a>

  <a href="portfolio.html" class="flex-1 flex justify-center items-center text-white text-sm">üìä Portfolio</a>
  <a href="settings.html" class="flex-1 flex justify-center items-center text-white text-sm">‚öôÔ∏è Settings</a>
</div>

<!-- üí° Scripts -->
<script>
  function openChainPopup() {
    document.getElementById('chainPopup').classList.remove('hidden');
    document.getElementById('chainSearch').value = '';
    document.getElementById('chainSearchResult').innerHTML = '';
  }

  function closeChainPopup() {
    document.getElementById('chainPopup').classList.add('hidden');
  }

  function openTokenPopup(name, address, image) {
    document.getElementById('tokenName').innerText = name;
    document.getElementById('tokenAddress').innerText = address;
    document.getElementById('tokenImage').src = image;
    document.getElementById('tokenModal').classList.remove('hidden');
  }

  function closeTokenPopup() {
    document.getElementById('tokenModal').classList.add('hidden');
  }

  function copyAddress() {
    const address = document.getElementById('tokenAddress').innerText;
    navigator.clipboard.writeText(address).then(() => {
      alert("Address copied!");
    });
  }

  function handleChainSearch() {
    const input = document.getElementById('chainSearch').value.trim();
    const resultBox = document.getElementById('chainSearchResult');

    if (input.startsWith("0x") && input.length >= 42) {
      resultBox.innerHTML = "Fetching token info...";
      // Simuler appel API
      setTimeout(() => {
        resultBox.innerHTML = `
          <div onclick="openTokenPopup('MockToken', '${input}', 'https://cryptologos.cc/logos/ethereum-eth-logo.png')" class="p-2 bg-gray-800 rounded-lg cursor-pointer">
            <p class="text-white font-semibold">MockToken</p>
            <p class="text-xs text-gray-400">${input}</p>
          </div>`;
      }, 800);
    } else {
      resultBox.innerHTML = '';
    }
  }

  function toggleChain(button, chainName) {
    const isSelected = button.classList.contains('bg-white');
    if (isSelected) {
      button.classList.remove('bg-white', 'text-black');
      button.classList.add('bg-white/10', 'text-white');
      button.querySelector('.chain-x')?.remove();
    } else {
      button.classList.remove('bg-white/10', 'text-white');
      button.classList.add('bg-white', 'text-black');
      const x = document.createElement('span');
      x.className = 'ml-2 chain-x';
      x.innerText = '‚úï';
      button.appendChild(x);
    }
  }

  // üïì Dropdown filtres dur√©e
  document.getElementById('durationDropdownBtn').addEventListener('click', () => {
    const menu = document.getElementById('durationDropdown');
    menu.classList.toggle('hidden');
  });

  window.addEventListener('click', function(e) {
    const dropdown = document.getElementById('durationDropdown');
    const btn = document.getElementById('durationDropdownBtn');
    if (!btn.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.classList.add('hidden');
    }
  });

  function selectDuration(duration) {
    document.getElementById('selectedDuration').innerText = duration;
    document.getElementById('durationDropdown').classList.add('hidden');
    // Optionnel : actualiser la liste de tokens selon dur√©e
  }
</script>
</body>
</html>