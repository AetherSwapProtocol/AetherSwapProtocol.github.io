<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AetherSwap</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
<style>
  :root {
    --bg: #0d0d0f;
    --fg: #e3e3e3;
    --accent: #7b5fff;
    --green: #4ade80;
    --red: #f87171;
    --bar-bg: #111;
    --btn-bg: #7b5fff;
    --btn-hover: #6746e9;
  }
  body {
    margin: 0; padding-top: 6rem;
    font-family: 'Inter', sans-serif;
    background-color: var(--bg);
    color: var(--fg);
    display: flex; flex-direction: column;
    align-items: center;
    min-height: 100vh;
    text-align: center;
  }
  /* Lang selector top right */
  #lang-selector {
    position: fixed;
    top: 0.7rem; right: 1rem;
    background: var(--bar-bg);
    border-radius: 5px;
    padding: 0.3rem 0.8rem;
    font-size: 1rem;
    color: var(--fg);
    border: 1px solid #444;
    cursor: pointer;
    z-index: 10001;
    user-select: none;
    box-shadow: 0 0 5px #0008;
    transition: background-color 0.3s ease;
  }
  #lang-selector:hover {
    background-color: #222;
  }

  /* Crypto price banner */
  #crypto-bar {
    position: fixed;
    top: 3rem; left: 0; right: 0;
    background: var(--bar-bg);
    color: var(--fg);
    font-family: monospace;
    font-size: 1.1rem;
    padding: 0.4rem 1rem;
    display: flex;
    justify-content: center;
    overflow: hidden;
    border-bottom: 1px solid #222;
    z-index: 10000;
    user-select: none;
    white-space: nowrap;
    box-shadow: inset 0 -1px 4px #0008;
  }
  #crypto-bar .ticker {
    display: inline-block;
    padding-left: 100%;
    animation: ticker-scroll 20s linear infinite;
  }
  @keyframes ticker-scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-100%); }
  }
  .crypto-positive { color: var(--green); font-weight: 600; }
  .crypto-negative { color: var(--red); font-weight: 600; }

  /* Main content */
  main {
    max-width: 720px;
    margin: 3rem 1rem 4rem;
    padding: 0;
  }
  h1 {
    font-size: 3rem;
    font-weight: 600;
    margin: 0.5rem 0 0.3rem;
    color: var(--accent);
  }
  p.emphase {
    font-style: italic;
    font-size: 1.3rem;
    margin: 0 0 1.5rem;
    max-width: 600px;
    line-height: 1.5;
    color: var(--accent);
  }
  section.intro-section p {
    font-size: 1.15rem;
    line-height: 1.6;
    margin-top: 0;
    margin-bottom: 3rem;
    color: var(--fg);
  }

  /* Visitors counter */
  #visitor-counter {
    font-family: monospace;
    font-size: 1.2rem;
    margin-top: 1rem;
    color: var(--accent);
    user-select: none;
  }

  /* Social call-to-action */
  #socials {
    margin-top: 3rem;
  }
  #socials h2 {
    color: var(--accent);
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }
  #socials p {
    font-size: 1.1rem;
    margin-bottom: 1.5rem;
  }
  #socials a {
    display: inline-block;
    margin: 0 1rem;
    color: var(--fg);
    font-weight: 600;
    text-decoration: none;
    border: 2px solid var(--accent);
    border-radius: 8px;
    padding: 0.5rem 1rem;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  #socials a:hover,
  #socials a:focus {
    background-color: var(--accent);
    color: var(--bg);
    outline: none;
  }

  /* Responsive tweaks */
  @media (max-width: 480px) {
    h1 { font-size: 2.2rem; }
    #crypto-bar {
      font-size: 1rem;
      padding: 0.3rem 0.6rem;
    }
    #socials a {
      margin: 0 0.5rem;
      padding: 0.4rem 0.8rem;
      font-size: 0.9rem;
    }
  }
</style>
</head>
<body>

<!-- Language selector -->
<select id="lang-selector" aria-label="Select language">
  <option value="en" selected>English</option>
  <option value="fr">Français</option>
  <option value="zh">中文</option>
</select>

<!-- Crypto prices banner -->
<div id="crypto-bar" aria-live="polite" aria-atomic="true" role="region">
  <div class="ticker" id="ticker-content">
    Loading prices...
  </div>
</div>

<main>
  <h1 id="title">AetherSwap</h1>
  <p class="emphase" id="tagline">The decentralized exchange redefining the future of crypto trading.</p>
  <section class="intro-section" id="intro-text">
    <p>
      Join us on our journey to build a seamless, transparent, and secure multi-chain swapping experience — designed for the community, by the community.
    </p>
  </section>

  <div id="visitor-counter" aria-live="polite" aria-atomic="true">
    Visitors who viewed this page: <span id="visitor-count">...</span>
  </div>

  <section id="socials" aria-label="Join our social networks">
    <h2>Join our community</h2>
    <p>Follow us and stay updated on Telegram, Twitter, and Discord!</p>
    <a href="https://t.me/AetherSwap" target="_blank" rel="noopener noreferrer" aria-label="Join Telegram">Telegram</a>
    <a href="https://twitter.com/AetherSwap" target="_blank" rel="noopener noreferrer" aria-label="Follow on Twitter">Twitter</a>
    <a href="https://discord.gg/AetherSwap" target="_blank" rel="noopener noreferrer" aria-label="Join Discord">Discord</a>
  </section>
</main>

<script>
  // Language switcher text content
  const texts = {
    en: {
      title: "AetherSwap",
      tagline: "The decentralized exchange redefining the future of crypto trading.",
      intro: "Join us on our journey to build a seamless, transparent, and secure multi-chain swapping experience — designed for the community, by the community.",
      socialsTitle: "Join our community",
      socialsDesc: "Follow us and stay updated on Telegram, Twitter, and Discord!",
    },
    fr: {
      title: "AetherSwap",
      tagline: "L'échange décentralisé qui redéfinit l'avenir du trading crypto.",
      intro: "Rejoignez-nous dans notre aventure pour créer une expérience d'échange multi-chain fluide, transparente et sécurisée — conçue pour la communauté, par la communauté.",
      socialsTitle: "Rejoignez notre communauté",
      socialsDesc: "Suivez-nous et restez informés sur Telegram, Twitter et Discord !",
    },
    zh: {
      title: "AetherSwap",
      tagline: "重新定义加密交易未来的去中心化交易所。",
      intro: "加入我们，共同打造无缝、透明且安全的多链交换体验——为社区而建，由社区驱动。",
      socialsTitle: "加入我们的社区",
      socialsDesc: "关注我们的 Telegram、Twitter 和 Discord，获取最新资讯！",
    }
  };

  const langSelector = document.getElementById('lang-selector');
  const titleEl = document.getElementById('title');
  const taglineEl = document.querySelector('.emphase');
  const introEl = document.getElementById('intro-text').querySelector('p');
  const socialsSection = document.getElementById('socials');
  const socialsTitle = socialsSection.querySelector('h2');
  const socialsDesc = socialsSection.querySelector('p');

  langSelector.addEventListener('change', (e) => {
    const lang = e.target.value;
    const t = texts[lang] || texts.en;
    titleEl.textContent = t.title;
    taglineEl.textContent = t.tagline;
    introEl.textContent = t.intro;
    socialsTitle.textContent = t.socialsTitle;
    socialsDesc.textContent = t.socialsDesc;
  });

  // Fetch and update crypto prices with live API (CoinGecko)
  async function fetchPrices() {
    const apiURL = 'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,solana,ethereum&vs_currencies=usd&include_24hr_change=true';
    try {
      const res = await fetch(apiURL);
      const data = await res.json();

      const formatPrice = (p) => p.toFixed(2);
      const formatChange = (c) => (c > 0 ? `+${c.toFixed(2)}%` : `${c.toFixed(2)}%`);

      const coins = [
        { id: 'bitcoin', symbol: 'BTC' },
        { id: 'solana', symbol: 'SOL' },
        { id: 'ethereum', symbol: 'ETH' },
      ];

      let tickerHTML = coins.map(coin => {
        const price = data[coin.id].usd;
        const change = data[coin.id].usd_24h_change;
        const positive = change >= 0;
        const colorClass = positive ? 'crypto-positive' : 'crypto-negative';
        return `${coin.symbol}: $${formatPrice(price)} <span class="${colorClass}">(${formatChange(change)})</span>`;
      }).join(' — ');

      document.getElementById('ticker-content').innerHTML = tickerHTML;
    } catch (err) {
      document.getElementById('ticker-content').textContent = 'Failed to load prices.';
      console.error(err);
    }
  }

  fetchPrices();
  // Refresh prices every 60 seconds
  setInterval(fetchPrices, 60000);

  // NEW RELIABLE VISITOR COUNTER
  async function updateVisitorCounter() {
    try {
      // First try CountAPI with unique key
      const countRes = await fetch('https://api.countapi.xyz/hit/aetherswap-' + window.location.hostname + '/visits');
      const countData = await countRes.json();
      
      if(countData && countData.value) {
        document.getElementById('visitor-count').textContent = countData.value.toLocaleString();
      } else {
        // Fallback to alternative counter
        const fallbackRes = await fetch('https://counter.dev/api/count?label=aetherswap');
        const fallbackData = await fallbackRes.json();
        document.getElementById('visitor-count').textContent = fallbackData.count || "1000+";
      }
    } catch {
      // Ultimate fallback
      document.getElementById('visitor-count').textContent = "1000+";
    }
  }
  
  updateVisitorCounter();
</script>

</body>
</html>
