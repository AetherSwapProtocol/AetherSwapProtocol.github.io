<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="AetherSwap - Decentralized multi-chain exchange" />
<meta name="keywords" content="crypto, exchange, defi, blockchain, swap" />
<meta property="og:title" content="AetherSwap - Decentralized Multi-Chain Exchange">
<meta property="og:description" content="Swap your tokens securely and instantly across multiple blockchains">
<meta name="twitter:card" content="summary_large_image">
<title>AetherSwap | Decentralized Exchange</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.rel='stylesheet'" />
<noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" /></noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  :root {
    --primary: #6366f1;
    --primary-dark: #4f46e5;
    --primary-light: #818cf8;
    --dark: #1e293b;
    --light: #f8fafc;
    --gray: #64748b;
    --light-gray: #e2e8f0;
    --success: #10b981;
    --danger: #ef4444;
    --warning: #f59e0b;
    --white: #ffffff;
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
    --radius: 0.5rem;
    --breakpoint-md: 768px;
    
    /* Dark mode variables */
    --bg-color: var(--light);
    --text-color: var(--dark);
    --surface-color: var(--white);
    --border-color: var(--light-gray);
  }

  [data-theme="dark"] {
    --bg-color: #0f172a;
    --text-color: #f8fafc;
    --surface-color: #1e293b;
    --border-color: #334155;
    --light-gray: #334155;
  }

  * {
    margin:0; padding:0; box-sizing:border-box;
  }
  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: background 0.3s ease, color 0.3s ease;
  }
  .header {
    position: fixed;
    top:0; left:0; right:0;
    background: var(--surface-color);
    box-shadow: var(--shadow);
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
    transition: background 0.3s ease;
  }
  .logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 700;
    font-size: 1.5rem;
    color: var(--primary);
    text-decoration: none;
  }
  .logo svg {
    flex-shrink: 0;
  }
  .header-controls {
    display: flex;
    gap: 1rem;
    align-items: center;
  }
  .lang-selector, .theme-toggle {
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    background: var(--surface-color);
    color: var(--text-color);
    padding: 0.3rem 0.6rem;
    font-size: 0.9rem;
    cursor: pointer;
    transition: border-color 0.2s ease;
  }
  .lang-selector:hover, .theme-toggle:hover {
    border-color: var(--primary-light);
  }
  .theme-toggle {
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .ticker-bar {
    position: fixed;
    top: 4.6rem;
    left: 0; right: 0;
    background: var(--surface-color);
    border-bottom: 1px solid var(--border-color);
    padding: 0.7rem 2rem;
    overflow: hidden;
    z-index: 900;
    transition: background 0.3s ease, border-color 0.3s ease;
  }
  .ticker-content {
    display: inline-block;
    white-space: nowrap;
    animation: ticker-scroll 25s linear infinite;
    font-weight: 600;
    font-size: 0.9rem;
    color: var(--text-color);
    will-change: transform;
    padding-right: 100%;
  }
  @keyframes ticker-scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  .ticker-item {
    display: inline-flex;
    align-items: center;
    margin-right: 3rem;
    gap: 0.3rem;
  }
  .positive {
    color: var(--success);
  }
  .negative {
    color: var(--danger);
  }
  .neutral {
    color: var(--warning);
  }
  main {
    padding: 8rem 2rem 4rem;
    max-width: 1100px;
    margin: 0 auto;
    flex-grow: 1;
  }
  h1.hero-title {
    font-size: 3rem;
    font-weight: 700;
    color: var(--primary-dark);
    margin-bottom: 1rem;
    text-align: center;
  }
  p.hero-subtitle {
    font-size: 1.2rem;
    color: var(--gray);
    max-width: 650px;
    margin: 0 auto 2.5rem;
    text-align: center;
  }
  .search-bar {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
  .search-input {
    flex-grow: 1;
    padding: 0.8rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    background: var(--surface-color);
    color: var(--text-color);
    font-family: inherit;
    transition: border-color 0.2s ease;
  }
  .search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
  }
  .search-button {
    background: var(--primary);
    color: var(--white);
    border: none;
    border-radius: var(--radius);
    padding: 0 1.5rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  .search-button:hover {
    background: var(--primary-dark);
  }
  .section {
    background: var(--surface-color);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 2rem;
    margin-bottom: 2.5rem;
    transition: background 0.3s ease;
  }
  .section-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--primary-dark);
    margin-bottom: 1rem;
  }
  .section-text {
    color: var(--text-color);
    line-height: 1.5;
    margin-bottom: 1.5rem;
  }
  .stats {
    display: flex;
    justify-content: center;
    gap: 2rem;
    flex-wrap: wrap;
  }
  .stat {
    background: var(--primary-light);
    color: var(--white);
    border-radius: var(--radius);
    padding: 1rem 1.5rem;
    min-width: 120px;
    text-align: center;
  }
  .stat-value {
    font-size: 1.6rem;
    font-weight: 700;
  }
  .stat-label {
    font-size: 0.9rem;
  }
  .token-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
  }
  .token-table th, .token-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
  }
  .token-table th {
    font-weight: 600;
    color: var(--primary-dark);
  }
  .token-table tr:last-child td {
    border-bottom: none;
  }
  .token-table tr:hover {
    background: rgba(99, 102, 241, 0.05);
  }
  .token-icon {
    width: 24px;
    height: 24px;
    margin-right: 0.5rem;
    vertical-align: middle;
  }
  .social-links {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }
  .social-link {
    background: var(--primary);
    color: var(--white);
    padding: 0.75rem 1.4rem;
    border-radius: var(--radius);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    transition: background 0.2s ease;
  }
  .social-link:hover {
    background: var(--primary-dark);
  }
  .social-link i {
    font-size: 1rem;
  }
  footer.footer {
    background: var(--surface-color);
    border-top: 1px solid var(--border-color);
    text-align: center;
    padding: 1.5rem 2rem;
    font-size: 0.9rem;
    color: var(--gray);
    transition: background 0.3s ease, border-color 0.3s ease;
  }
  .loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(99, 102, 241, 0.3);
    border-radius: 50%;
    border-top-color: var(--primary);
    animation: spin 1s ease-in-out infinite;
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  @media (max-width: 768px) {
    h1.hero-title {
      font-size: 2.2rem;
    }
    main {
      padding: 7rem 1rem 3rem;
    }
    .stats {
      gap: 1rem;
    }
    .stat {
      min-width: 100px;
      padding: 0.75rem 1rem;
    }
    .header-controls {
      gap: 0.5rem;
    }
    .search-bar {
      flex-direction: column;
    }
    .token-table {
      display: block;
      overflow-x: auto;
    }
  }
</style>
</head>
<body>

<header class="header" role="banner">
  <a href="#" class="logo" aria-label="AetherSwap logo">
    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40Z" fill="#6366F1"/>
      <path d="M25.6569 12.6863C27.1571 14.1865 27.1571 16.581 25.6569 18.0812L21.4142 22.3239C20.6332 23.1049 19.3668 23.1049 18.5858 22.3239L14.3431 18.0812C12.8429 16.581 12.8429 14.1865 14.3431 12.6863C15.8434 11.186 18.2379 11.186 19.7382 12.6863L20 12.9481L20.2618 12.6863C21.7621 11.186 24.1566 11.186 25.6569 12.6863Z" fill="white"/>
      <path d="M25.6569 21.9188C27.1571 23.419 27.1571 25.8135 25.6569 27.3137C24.1566 28.814 21.7621 28.814 20.2618 27.3137L20 27.0519L19.7382 27.3137C18.2379 28.814 15.8434 28.814 14.3431 27.3137C12.8429 25.8135 12.8429 23.419 14.3431 21.9188L18.5858 17.6761C19.3668 16.8951 20.6332 16.8951 21.4142 17.6761L25.6569 21.9188Z" fill="white"/>
    </svg>
    AetherSwap
  </a>
  <div class="header-controls">
    <select class="lang-selector" aria-label="Select Language" id="lang-select">
      <option value="en">English</option>
      <option value="fr">Français</option>
      <option value="es">Español</option>
      <option value="de">Deutsch</option>
      <option value="zh">中文</option>
    </select>
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
      <i class="fas fa-moon"></i>
    </button>
  </div>
</header>

<div class="ticker-bar" aria-live="polite" aria-atomic="true">
  <div class="ticker-content" id="ticker">
    <div class="loading"></div>
  </div>
</div>

<main role="main">
  <h1 class="hero-title" id="hero-title">Decentralized Multi-Chain Exchange</h1>
  <p class="hero-subtitle" id="hero-subtitle">Swap your tokens securely and instantly across multiple blockchains.</p>

  <div class="search-bar">
    <input type="text" class="search-input" id="contract-search" placeholder="Enter token contract address..." />
    <button class="search-button" id="search-button">Search</button>
  </div>

  <section class="section" aria-labelledby="section1-title">
    <h2 class="section-title" id="section1-title">Why AetherSwap?</h2>
    <p class="section-text" id="section1-text">
      Experience seamless token swapping with low fees, fast transactions, and the highest security standards.
    </p>
  </section>

  <section class="section" aria-labelledby="section2-title">
    <h2 class="section-title" id="section2-title">Top Performing Tokens</h2>
    <div class="token-table-container">
      <table class="token-table" id="top-tokens">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Token</th>
            <th>Price</th>
            <th>24h Change</th>
            <th>Market Cap</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="5" style="text-align: center;">Loading tokens...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <section class="section" aria-labelledby="section3-title">
    <h2 class="section-title" id="section3-title">Statistics</h2>
    <div class="stats" role="list">
      <div class="stat" role="listitem" aria-label="Total Volume">
        <div class="stat-value" id="stat-volume">1.2M+</div>
        <div class="stat-label" id="stat-volume-label">Total Volume</div>
      </div>
      <div class="stat" role="listitem" aria-label="Active Users">
        <div class="stat-value" id="stat-users">45K+</div>
        <div class="stat-label" id="stat-users-label">Active Users</div>
      </div>
      <div class="stat" role="listitem" aria-label="Supported Chains">
        <div class="stat-value" id="stat-chains">12</div>
        <div class="stat-label" id="stat-chains-label">Supported Chains</div>
      </div>
    </div>
  </section>

  <section class="section" aria-labelledby="section4-title">
    <h2 class="section-title" id="section4-title">Connect with Us</h2>
    <p class="section-text" id="section4-text">
      Stay updated by following us on social media and joining our community.
    </p>
    <div class="social-links">
      <a href="https://twitter.com/aetherswap" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Twitter">
        <i class="fab fa-twitter"></i> <span id="social-twitter">Twitter</span>
      </a>
      <a href="https://discord.gg/aetherswap" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Discord">
        <i class="fab fa-discord"></i> <span id="social-discord">Discord</span>
      </a>
      <a href="https://t.me/aetherswap" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Telegram">
        <i class="fab fa-telegram"></i> <span id="social-telegram">Telegram</span>
      </a>
    </div>
  </section>
</main>

<footer class="footer" role="contentinfo">
  <p id="footer-text">&copy; 2025 AetherSwap. All rights reserved.</p>
</footer>

<script>
  // Contenu texte par langue
  const texts = {
    en: {
      heroTitle: "Decentralized Multi-Chain Exchange",
      heroSubtitle: "Swap your tokens securely and instantly across multiple blockchains.",
      searchPlaceholder: "Enter token contract address...",
      searchButton: "Search",
      section1Title: "Why AetherSwap?",
      section1Text: "Experience seamless token swapping with low fees, fast transactions, and the highest security standards.",
      section2Title: "Top Performing Tokens",
      section3Title: "Statistics",
      statVolume: "1.2M+",
      statVolumeLabel: "Total Volume",
      statUsers: "45K+",
      statUsersLabel: "Active Users",
      statChains: "12",
      statChainsLabel: "Supported Chains",
      section4Title: "Connect with Us",
      section4Text: "Stay updated by following us on social media and joining our community.",
      socialTwitter: "Twitter",
      socialDiscord: "Discord",
      socialTelegram: "Telegram",
      footerText: "© 2025 AetherSwap. All rights reserved.",
      tokenHeaders: ["Rank", "Token", "Price", "24h Change", "Market Cap"],
      loadingTokens: "Loading tokens...",
      noResults: "No tokens found",
      errorLoading: "Error loading data"
    },
    fr: {
      heroTitle: "Échange Décentralisé Multi-Chaines",
      heroSubtitle: "Échangez vos tokens en toute sécurité et instantanément sur plusieurs blockchains.",
      searchPlaceholder: "Entrez une adresse de contrat...",
      searchButton: "Rechercher",
      section1Title: "Pourquoi AetherSwap ?",
      section1Text: "Profitez d'un échange de tokens fluide avec des frais bas, des transactions rapides, et les plus hauts standards de sécurité.",
      section2Title: "Tokens les Plus Performants",
      section3Title: "Statistiques",
      statVolume: "1,2M+",
      statVolumeLabel: "Volume Total",
      statUsers: "45K+",
      statUsersLabel: "Utilisateurs Actifs",
      statChains: "12",
      statChainsLabel: "Chaînes Supportées",
      section4Title: "Connectez-vous avec Nous",
      section4Text: "Restez informé en nous suivant sur les réseaux sociaux et en rejoignant notre communauté.",
      socialTwitter: "Twitter",
      socialDiscord: "Discord",
      socialTelegram: "Telegram",
      footerText: "© 2025 AetherSwap. Tous droits réservés.",
      tokenHeaders: ["Rang", "Token", "Prix", "24h Change", "Market Cap"],
      loadingTokens: "Chargement des tokens...",
      noResults: "Aucun token trouvé",
      errorLoading: "Erreur de chargement"
    },
    es: {
      heroTitle: "Intercambio Descentralizado Multi-Cadena",
      heroSubtitle: "Intercambia tus tokens de forma segura e instantánea en múltiples blockchains.",
      searchPlaceholder: "Ingrese dirección de contrato...",
      searchButton: "Buscar",
      section1Title: "¿Por qué AetherSwap?",
      section1Text: "Experimenta un intercambio fluido de tokens con bajas tarifas, transacciones rápidas y los más altos estándares de seguridad.",
      section2Title: "Tokens con Mejor Rendimiento",
      section3Title: "Estadísticas",
      statVolume: "1,2M+",
      statVolumeLabel: "Volumen Total",
      statUsers: "45K+",
      statUsersLabel: "Usuarios Activos",
      statChains: "12",
      statChainsLabel: "Cadenas Soportadas",
      section4Title: "Conéctate con Nosotros",
      section4Text: "Mantente actualizado siguiendo nuestras redes sociales y uniéndote a nuestra comunidad.",
      socialTwitter: "Twitter",
      socialDiscord: "Discord",
      socialTelegram: "Telegram",
      footerText: "© 2025 AetherSwap. Todos los derechos reservados.",
      tokenHeaders: ["Rango", "Token", "Precio", "24h Cambio", "Capitalización"],
      loadingTokens: "Cargando tokens...",
      noResults: "No se encontraron tokens",
      errorLoading: "Error al cargar"
    }
  };

  // Éléments DOM
  const langSelect = document.getElementById('lang-select');
  const themeToggle = document.getElementById('theme-toggle');
  const themeIcon = themeToggle.querySelector('i');
  const contractSearch = document.getElementById('contract-search');
  const searchButton = document.getElementById('search-button');
  const topTokensTable = document.getElementById('top-tokens');

  // Fonction pour mettre à jour les textes
  function updateTexts(lang) {
    if (!texts[lang]) lang = 'en'; // Fallback to English
    
    document.documentElement.lang = lang;
    document.getElementById('hero-title').textContent = texts[lang].heroTitle;
    document.getElementById('hero-subtitle').textContent = texts[lang].heroSubtitle;
    contractSearch.placeholder = texts[lang].searchPlaceholder;
    searchButton.textContent = texts[lang].searchButton;
    document.getElementById('section1-title').textContent = texts[lang].section1Title;
    document.getElementById('section1-text').textContent = texts[lang].section1Text;
    document.getElementById('section2-title').textContent = texts[lang].section2Title;
    document.getElementById('section3-title').textContent = texts[lang].section3Title;
    document.getElementById('stat-volume').textContent = texts[lang].statVolume;
    document.getElementById('stat-volume-label').textContent = texts[lang].statVolumeLabel;
    document.getElementById('stat-users').textContent = texts[lang].statUsers;
    document.getElementById('stat-users-label').textContent = texts[lang].statUsersLabel;
    document.getElementById('stat-chains').textContent = texts[lang].statChains;
    document.getElementById('stat-chains-label').textContent = texts[lang].statChainsLabel;
    document.getElementById('section4-title').textContent = texts[lang].section4Title;
    document.getElementById('section4-text').textContent = texts[lang].section4Text;
    document.getElementById('social-twitter').textContent = texts[lang].socialTwitter;
    document.getElementById('social-discord').textContent = texts[lang].socialDiscord;
    document.getElementById('social-telegram').textContent = texts[lang].socialTelegram;
    document.getElementById('footer-text').textContent = texts[lang].footerText;
    
    // Update token table headers if they exist
    const headers = topTokensTable.querySelectorAll('th');
    if (headers.length === texts[lang].tokenHeaders.length) {
      texts[lang].tokenHeaders.forEach((headerText, index) => {
        headers[index].textContent = headerText;
      });
    }
  }

  // Fonction pour basculer le thème
  function toggleTheme() {
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
    if (isDark) {
      document.documentElement.removeAttribute('data-theme');
      localStorage.setItem('theme', 'light');
      themeIcon.classList.replace('fa-sun', 'fa-moon');
      themeToggle.setAttribute('aria-label', 'Toggle dark mode');
    } else {
      document.documentElement.setAttribute('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
      themeIcon.classList.replace('fa-moon', 'fa-sun');
      themeToggle.setAttribute('aria-label', 'Toggle light mode');
    }
  }

  // Fonction pour le ticker API
  async function fetchTickerData() {
    try {
      const response = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=bitcoin,ethereum,solana,cardano,polkadot&price_change_percentage=24h');
      const data = await response.json();
      
      const tickerItems = data.map(coin => {
        const changeClass = coin.price_change_percentage_24h > 0 ? 'positive' : 
                          coin.price_change_percentage_24h < 0 ? 'negative' : 'neutral';
        const changeIcon = coin.price_change_percentage_24h > 0 ? '▲' : 
                          coin.price_change_percentage_24h < 0 ? '▼' : '■';
        return `
          <span class="ticker-item">
            ${coin.symbol.toUpperCase()} $${coin.current_price.toLocaleString()} 
            <span class="${changeClass}">
              ${changeIcon} ${Math.abs(coin.price_change_percentage_24h).toFixed(1)}%
            </span>
          </span>
        `;
      }).join('');

      document.getElementById('ticker').innerHTML = tickerItems;
      
      // Relancer l'animation après mise à jour
      const ticker = document.querySelector('.ticker-content');
      ticker.style.animation = 'none';
      void ticker.offsetWidth; // Déclenche un reflow
      ticker.style.animation = 'ticker-scroll 25s linear infinite';
      
    } catch (error) {
      console.error('Erreur API Ticker:', error);
      // Fallback statique si l'API échoue
      document.getElementById('ticker').innerHTML = `
        <span class="ticker-item">BTC $28,500 <span class="positive">▲ +2.5%</span></span>
        <span class="ticker-item">ETH $1,800 <span class="negative">▼ -1.2%</span></span>
        <span class="ticker-item">SOL $22.3 <span class="positive">▲ +3.1%</span></span>
        <span class="ticker-item">ADA $0.33 <span class="positive">▲ +0.7%</span></span>
        <span class="ticker-item">DOT $6.1 <span class="negative">▼ -0.4%</span></span>
      `;
    }
  }

  // Fonction pour récupérer les meilleurs tokens
  async function fetchTopTokens() {
    try {
      const response = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1&sparkline=false&price_change_percentage=24h');
      const data = await response.json();
      
      const tbody = topTokensTable.querySelector('tbody');
      tbody.innerHTML = '';
      
      data.forEach((token, index) => {
        const changeClass = token.price_change_percentage_24h > 0 ? 'positive' : 
                          token.price_change_percentage_24h < 0 ? 'negative' : 'neutral';
        const changeIcon = token.price_change_percentage_24h > 0 ? '▲' : 
                          token.price_change_percentage_24h < 0 ? '▼' : '■';
        
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${index + 1}</td>
          <td>
            <img src="${token.image}" alt="${token.name}" class="token-icon" />
            ${token.name} (${token.symbol.toUpperCase()})
          </td>
          <td>$${token.current_price.toLocaleString()}</td>
          <td class="${changeClass}">
            ${changeIcon} ${Math.abs(token.price_change_percentage_24h).toFixed(2)}%
          </td>
          <td>$${token.market_cap.toLocaleString()}</td>
        `;
        tbody.appendChild(row);
      });
      
    } catch (error) {
      console.error('Erreur API Tokens:', error);
      const tbody = topTokensTable.querySelector('tbody');
      tbody.innerHTML = `
        <tr>
          <td colspan="5" style="text-align: center; color: var(--danger);">
            ${texts[langSelect.value]?.errorLoading || 'Error loading data'}
          </td>
        </tr>
      `;
    }
  }

  // Fonction pour rechercher un token par contrat
  async function searchTokenByContract() {
    const contractAddress = contractSearch.value.trim();
    if (!contractAddress) return;
    
    try {
      // Ici vous devriez implémenter la logique pour interroger votre API
      // ou une API comme Etherscan pour les tokens ERC-20
      console.log('Searching for contract:', contractAddress);
      alert(`Token search would look for contract: ${contractAddress}\n(API implementation needed)`);
      
    } catch (error) {
      console.error('Search error:', error);
      alert('Error searching for token');
    }
  }

  // Gestionnaires d'événements
  langSelect.addEventListener('change', (e) => {
    const selectedLang = e.target.value;
    localStorage.setItem('preferredLang', selectedLang);
    updateTexts(selectedLang);
  });

  themeToggle.addEventListener('click', toggleTheme);
  searchButton.addEventListener('click', searchTokenByContract);
  contractSearch.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') searchTokenByContract();
  });

  // Initialisation au chargement
  document.addEventListener('DOMContentLoaded', () => {
    // Récupérer la langue préférée
    const preferredLang = localStorage.getItem('preferredLang') || 'en';
    langSelect.value = preferredLang;
    updateTexts(preferredLang);
    
    // Récupérer le thème préféré
    const preferredTheme = localStorage.getItem('theme') || 
                          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    
    if (preferredTheme === 'dark') {
      document.documentElement.setAttribute('data-theme', 'dark');
      themeIcon.classList.replace('fa-moon', 'fa-sun');
    }
    
    // Mettre à jour l'icône du thème
    themeToggle.setAttribute('aria-label', preferredTheme === 'dark' ? 'Toggle light mode' : 'Toggle dark mode');
    
    // Charger les données
    fetchTickerData();
    fetchTopTokens();
    
    // Actualiser périodiquement
    setInterval(fetchTickerData, 60000);
    setInterval(fetchTopTokens, 300000);
  });

  // Écouter les changements de préférence système
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
    if (!localStorage.getItem('theme')) {
      if (e.matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeIcon.classList.replace('fa-moon', 'fa-sun');
      } else {
        document.documentElement.removeAttribute('data-theme');
        themeIcon.classList.replace('fa-sun', 'fa-moon');
      }
    }
  });
</script>
</body>
</html>