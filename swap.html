<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AetherSwap | Swap Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@solana/web3.js@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Styles de base identiques à index.html */
        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: #0a0a0a;
            color: #ffffff;
        }
        .gradient-text {
            background: linear-gradient(90deg, #7e22ce 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .gradient-border {
            position: relative;
            border-radius: 1rem;
        }
        .gradient-border::before {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 1rem;
            background: linear-gradient(45deg, #7e22ce, #3b82f6, #7e22ce);
            background-size: 200% 200%;
            z-index: -1;
            animation: gradient 3s ease infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Styles spécifiques pour le swap */
        .wallet-icon {
            width: 24px;
            height: 24px;
            object-fit: contain;
        }
        .token-logo {
            width: 24px;
            height: 24px;
            border-radius: 50%;
        }
        #wallet-menu {
            display: none;
            position: absolute;
            right: 0;
            z-index: 10;
        }
        .wallet-option:hover {
            background: rgba(126, 34, 206, 0.1);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Barre de navigation améliorée -->
    <nav class="container mx-auto px-6 py-6 flex justify-between items-center">
        <a href="index.html" class="flex items-center space-x-2">
            <div class="w-10 h-10 rounded-full gradient-border flex items-center justify-center">
                <div class="w-8 h-8 bg-black rounded-full flex items-center justify-center">
                    <i class="fas fa-arrow-left text-purple-400"></i>
                </div>
            </div>
            <span class="text-2xl font-bold gradient-text">AetherSwap</span>
        </a>
        
        <!-- Nouveau bouton Connect Wallet avec menu déroulant -->
        <div class="relative">
            <button id="connect-wallet" class="gradient-border px-6 py-2 rounded-full font-medium text-white hover:opacity-90 transition flex items-center">
                <span id="wallet-text">Connect Wallet</span>
                <i class="fas fa-chevron-down ml-2 text-xs"></i>
            </button>
            
            <div id="wallet-menu" class="mt-2 w-48 bg-gray-900 rounded-xl border border-gray-800 py-1">
                <a href="#" class="wallet-option flex items-center px-4 py-2" data-wallet="phantom">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDIyQzE3LjUyMjggMjIgMjIgMTcuNTIyOCAyMiAxMkMyMiA2LjQ3NzE1IDE3LjUyMjggMiAxMiAyQzYuNDc3MTUgMiAyIDYuNDc3MTUgMiAxMkMyIDE3LjUyMjggNi40NzcxNSAyMiAxMiAyMloiIGZpbGw9IiM0MkM1QjkiLz4KPHBhdGggZD0iTTEyIDEzLjVWMTYuNUwxNC41IDE1TDEyIDEzLjVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTIgNy41VjEzLjVMMTAgMTJMMTIgMTAuNVY3LjVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNy41IDEwTDEyIDEzLjVWMTYuNUw3LjUgMTNWMTBaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4=" class="wallet-icon mr-3">
                    Phantom
                </a>
                <a href="#" class="wallet-option flex items-center px-4 py-2" data-wallet="solflare">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDIyQzE3LjUyMjggMjIgMjIgMTcuNTIyOCAyMiAxMkMyMiA2LjQ3NzE1IDE3LjUyMjggMiAxMiAyQzYuNDc3MTUgMiAyIDYuNDc3MTUgMiAxMkMyIDE3LjUyMjggNi40NzcxNSAyMiAxMiAyMloiIGZpbGw9IiNGRkYiLz4KPHBhdGggZD0iTTcuMjA3MDMgMTIuNDE0MkwxMC42MDE2IDE1LjgwODhDMTEuMzg0OCAxNi41OTIgMTIuNjE1MiAxNi41OTIgMTMuMzk4NCAxNS44MDg4TDE2Ljc5MyAxMi40MTQyQzE3LjU3NjIgMTEuNjMxIDE3LjU3NjIgMTAuNDAwNiAxNi43OTMgOS42MTc0MUMxNi4wMDk4IDguODM0MjIgMTQuNzc5NCA4LjgzNDIyIDEzLjk5NjIgOS42MTc0MUwxMi43MDcgMTAuOTA2NkwxMS40MTc4IDkuNjE3NDFDMTEuMDI2MiA5LjIyNTgxIDEwLjQ5MDggOS4wMzAxMiA5Ljk5NjA5IDkuMDgzODVDOS41MDEzOSA5LjEzNzU4IDkuMTA5NzcgOS41MjkyMyA5LjA1NjA0IDEwLjAyMzlDOC45ODQzNSAxMC43Njg5IDkuNTkxNDcgMTEuMzc2IDEwLjMzNjUgMTEuMzA0M0wxMC45MDY0IDEwLjkwNjZMMTIuMDAzNyAxMkMxMi4zOTUzIDEyLjM5MTYgMTIuMzk1MyAxMi45OTk4IDEyLjAwMzcgMTMuMzkxNEMxMS42MTIxIDEzLjc4MyAxMS4wMDM5IDEzLjc4MyAxMC42MTIzIDEzLjM5MTRMNy4yMDcwMyAxMFYxMi40MTQyWiIgZmlsbD0iIzAwMDAwMCIvPgo8L3N2Zz4=" class="wallet-icon mr-3">
                    Solflare
                </a>
                <a href="#" class="wallet-option flex items-center px-4 py-2" data-wallet="backpack">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQgN0gxMlYxN0g0VjdaIiBzdHJva2U9IiM3RTIyQ0UiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMiA3SDIwVjE3SDEyVjdaIiBzdHJva2U9IiMzQjgyRjYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPg==" class="wallet-icon mr-3">
                    Backpack
                </a>
            </div>
        </div>
    </nav>

    <!-- Interface de Swap -->
    <main class="container mx-auto px-4 py-8 max-w-md">
        <!-- Votre interface de swap existante... -->
    </main>

    <script>
        // Gestion du menu Wallet
        document.getElementById('connect-wallet').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('wallet-menu').style.display = 
                document.getElementById('wallet-menu').style.display === 'block' ? 'none' : 'block';
        });

        // Fermer le menu quand on clique ailleurs
        window.addEventListener('click', function() {
            document.getElementById('wallet-menu').style.display = 'none';
        });

        // Connexion aux différents wallets
        document.querySelectorAll('.wallet-option').forEach(option => {
            option.addEventListener('click', async function(e) {
                e.preventDefault();
                const walletType = this.dataset.wallet;
                const walletText = document.getElementById('wallet-text');
                
                walletText.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Connecting...';
                
                try {
                    let provider;
                    switch(walletType) {
                        case 'phantom':
                            provider = window.phantom?.solana;
                            break;
                        case 'solflare':
                            provider = window.solflare;
                            break;
                        case 'backpack':
                            provider = window.backpack;
                            break;
                    }

                    if (!provider) {
                        if (walletType === 'phantom') {
                            window.open('https://phantom.app/', '_blank');
                        }
                        throw new Error(`${walletType} not detected!`);
                    }

                    const response = await provider.connect();
                    const publicKey = response.publicKey.toString();
                    walletText.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                    
                    // Activer le bouton de swap
                    document.getElementById('swap-button').disabled = false;
                    
                    // Ici vous chargeriez les balances réelles
                    console.log(`Connected with ${publicKey}`);
                    
                } catch (error) {
                    console.error(error);
                    walletText.textContent = 'Connect Wallet';
                    alert(`Connection failed: ${error.message}`);
                }
            });
        });

        // Simulation de prix en temps réel
        async function updatePrices() {
            // En production, utilisez une API comme Jupiter
            const mockPrices = {
                'SOL_USDC': 150,
                'SOL_USDT': 149,
                'USDC_USDT': 0.99
            };
            
            // Ici vous mettriez à jour l'interface avec les vrais prix
            console.log("Prices updated:", mockPrices);
        }
    </script>
</body>
</html>