<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AetherSwap</title>
  <style>
    /* Styles globaux pour AetherSwap */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #0f1115;
      color: white;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: #1a1c22;
      border-bottom: 1px solid #2c2f36;
    }
    header h1 { margin: 0; font-size: 24px; }
    nav button {
      background: none;
      color: white;
      border: none;
      margin: 0 10px;
      font-size: 16px;
      cursor: pointer;
    }
    nav button:hover { text-decoration: underline; }
    .connect-button {
      padding: 8px 16px;
      background-color: #4f46e5;
      border: none;
      border-radius: 4px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    .main-container {
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .swap-box {
      background-color: #1f2128;
      border-radius: 10px;
      padding: 20px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
    }
    .token-select, .slippage-display {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .token-button {
      background-color: #2c2f36;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      color: white;
      cursor: pointer;
    }
    input[type="number"] {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      margin-bottom: 20px;
      background-color: #2c2f36;
      color: white;
    }
    #swapButton {
      background-color: #10b981;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 8px;
      width: 100%;
      cursor: pointer;
    }
    #swapButton:hover { background-color: #059669; }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background-color: #1f2128;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
    }
    .wallet-option {
      background-color: #2c2f36;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 10px;
      color: white;
      cursor: pointer;
      text-align: center;
    }
    .wallet-option:hover { background-color: #3a3d44; }
    .slippage-option.selected { background-color: #4f46e5 !important; }
    .slippage-option {
      background-color: #2c2f36;
      border-radius: 8px;
      padding: 10px;
      margin: 5px;
      cursor: pointer;
      display: inline-block;
      text-align: center;
    }
    footer {
      text-align: center;
      padding: 20px;
      font-size: 14px;
      color: #aaa;
    }
    .chart, .portfolio { display: none; }
  </style>
</head>
<body>

<header>
  <h1>AetherSwap</h1>
  <nav>
    <button id="tab-dashboard">Dashboard</button>
    <button id="tab-portfolio">Portfolio</button>
    <button id="tab-more">More</button>
  </nav>
  <button id="connectWalletBtn" class="connect-button">Connect Wallet</button>
</header>

<div class="main-container">
  <div id="swap-area" class="swap-box">
    <div class="token-select">
      <button id="tokenAButton" class="token-button">Select Token A</button>
      <button id="tokenBButton" class="token-button">Select Token B</button>
    </div>
    <input type="number" id="amountInput" placeholder="Enter amount" />
    <div class="slippage-display">
      <span>Slippage: <span id="slippageDisplay">0.5%</span></span>
      <button id="slippageButton" class="token-button">Adjust</button>
    </div>
    <button id="swapButton">Swap</button>
  </div>

  <div id="portfolio-area" class="portfolio" style="display:none;">
    <p>Your portfolio will be displayed here.</p>
  </div>
</div>

<footer>
  AetherSwap Â© 2025 â Built on Solana & Jupiter Aggregator â Compliant with MiCA.
</footer>

<!-- Modals -->
<div id="walletModal" class="modal"><div class="modal-content"><div class="wallet-option" onclick="connectPhantom()">Phantom</div><div class="wallet-option" onclick="connectSolflare()">Solflare</div><div class="wallet-option" onclick="connectWalletConnect()">WalletConnect</div><div class="wallet-option" onclick="connectTorus()">Torus</div></div></div>
<div id="tokenModal" class="modal"><div class="modal-content"><p>Select a token (dynamic list will be here)</p></div></div>
<div id="slippageModal" class="modal"><div class="modal-content"><h3>Select Slippage</h3><div><div class="slippage-option" data-value="0.1">0.1%</div><div class="slippage-option" data-value="0.5">0.5%</div><div class="slippage-option" data-value="1">1%</div><div class="slippage-option" data-value="custom">Custom</div></div><input type="number" id="customSlippageInput" style="display:none;" placeholder="Enter custom %" /><br/><br/><button id="closeSlippageModal" class="token-button">Close</button></div></div>
<div id="confirmationModal" class="modal"><div class="modal-content"><p id="confirmationMessage">Transaction sent!</p><button onclick="document.getElementById('confirmationModal').style.display='none'" class="token-button">Close</button></div></div>

<!-- Scripts -->
<script>
// Variables globales
let selectedTokenA = null;
let selectedTokenB = null;
let slippage = 0.5;
let connectedWalletPublicKey = null;

// Dummy wallet connection functions
function connectPhantom() { connectedWalletPublicKey = "DemoPhantomAddress"; document.getElementById("walletModal").style.display = "none"; updateConnectButton(); }
function connectSolflare() { connectedWalletPublicKey = "DemoSolflareAddress"; document.getElementById("walletModal").style.display = "none"; updateConnectButton(); }
function connectWalletConnect() { connectedWalletPublicKey = "DemoWalletConnectAddress"; document.getElementById("walletModal").style.display = "none"; updateConnectButton(); }
function connectTorus() { connectedWalletPublicKey = "DemoTorusAddress"; document.getElementById("walletModal").style.display = "none"; updateConnectButton(); }
function updateConnectButton() {
  if (connectedWalletPublicKey) {
    document.getElementById("connectWalletBtn").innerText = connectedWalletPublicKey.slice(0, 4) + "..." + connectedWalletPublicKey.slice(-4);
  }
}

// Slippage modal logic
document.getElementById("slippageButton").addEventListener("click", () => {
  document.getElementById("slippageModal").style.display = "flex";
});
document.querySelectorAll(".slippage-option").forEach(option => {
  option.addEventListener("click", () => {
    document.querySelectorAll(".slippage-option").forEach(o => o.classList.remove("selected"));
    option.classList.add("selected");
    if (option.dataset.value === "custom") {
      document.getElementById("customSlippageInput").style.display = "block";
      document.getElementById("customSlippageInput").value = slippage;
    } else {
      document.getElementById("customSlippageInput").style.display = "none";
      slippage = parseFloat(option.dataset.value);
      document.getElementById("slippageDisplay").innerText = slippage + "%";
    }
  });
});
document.getElementById("customSlippageInput").addEventListener("input", (e) => {
  const val = parseFloat(e.target.value);
  if (!isNaN(val) && val >= 0 && val <= 100) {
    slippage = val;
    document.getElementById("slippageDisplay").innerText = slippage + "%";
  }
});
document.getElementById("closeSlippageModal").addEventListener("click", () => {
  document.getElementById("slippageModal").style.display = "none";
});

// Swap action simulation
document.getElementById("swapButton").addEventListener("click", () => {
  if (!connectedWalletPublicKey) {
    alert("Please connect your wallet first.");
    return;
  }
  document.getElementById("confirmationMessage").innerText = "Swap executed successfully with " + slippage + "% slippage.";
  document.getElementById("confirmationModal").style.display = "flex";
});

// Open wallet modal
document.getElementById("connectWalletBtn").addEventListener("click", () => {
  document.getElementById("walletModal").style.display = "flex";
});

// Tabs navigation
document.getElementById("tab-dashboard").addEventListener("click", () => {
  document.getElementById("swap-area").style.display = "block";
  document.getElementById("portfolio-area").style.display = "none";
});
document.getElementById("tab-portfolio").addEventListener("click", () => {
  document.getElementById("swap-area").style.display = "none";
  document.getElementById("portfolio-area").style.display = "block";
});

// Close modals on outside click
window.addEventListener("click", (e) => {
  ["walletModal", "tokenModal", "slippageModal", "confirmationModal"].forEach(id => {
    const modal = document.getElementById(id);
    if (e.target === modal) modal.style.display = "none";
  });
});
</script>

</body>
</html>
