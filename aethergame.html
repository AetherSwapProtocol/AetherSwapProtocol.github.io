<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>Aether$wap</title>
  <style>
    :root {
      --bg: #0d0f1a;
      --panel: #1a1c29;
      --accent: #10E8F8;
      --accent-alt: #943DFF;
      --text: #ffffff;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', 'Orbitron', sans-serif;
    }
    body {
      background: var(--bg);
      color: var(--text);
      overflow: hidden;
    }
    h2, h3 {
      color: var(--accent);
      margin-bottom: 10px;
    }
    button {
      background: var(--accent);
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      font-weight: bold;
      color: #000;
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    button:hover {
      background: var(--accent-alt);
      color: #fff;
    }
    button:active {
      transform: scale(0.96);
    }
    nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--panel);
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      border-top: 1px solid #333;
      z-index: 10;
    }
    nav button {
      background: none;
      border: none;
      color: #aaa;
      font-size: 13px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    nav button.active {
      color: var(--accent);
    }
    .screen {
      display: none;
      padding: 20px;
      padding-bottom: 80px;
    }
    .screen.active {
      display: block;
    }
    header {
      background: var(--panel);
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
      color: #aaa;
      border-bottom: 1px solid #333;
    }
    #xp-bar {
      background: #333;
      height: 8px;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 4px;
    }
    #xp-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-alt), var(--accent));
      width: 0%;
      transition: width 0.5s ease-in-out;
    }
    #loading-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, #0d0f1a, #000);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 999;
      flex-direction: column;
    }
    #loading-screen h1 {
      font-size: 2.5rem;
      background: linear-gradient(45deg, var(--accent), var(--accent-alt));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
  </style>
</head>
<body>
  <div id="loading-screen"><h1>Aether$wap</h1></div>
  <header>
    <div id="user-id">User: guest</div>
    <div>
      <div>Lvl <span id="user-level">1</span> â¢ XP <span id="user-xp">0</span></div>
      <div id="xp-bar"><div id="xp-fill"></div></div>
    </div>
  </header>
  <div id="screen-tap" class="screen active">
    <h2>Tap to Earn</h2>
    <button onclick="tap()">TAP</button>
    <p>Taps: <span id="tap-count">0</span></p>
  </div>
  <div id="screen-missions" class="screen">
    <h2>Missions</h2>
    <button onclick="connectWallet()">Connect Wallet +500 XP</button>
    <h3>Daily Reward</h3>
    <button id="daily-reward-btn" onclick="claimDailyReward()">Claim +100 XP</button>
    <p id="daily-status" style="font-size: 13px; color: #999;"></p>
  </div>
  <div id="screen-referral" class="screen">
    <h2>Invite tes amis & Gagne ðª</h2>
    <p style="color:#aaa;">10% des rÃ©compenses de tes invitÃ©s, 5% de leurs invitÃ©s.</p>
    <div style="background:#12141f; border-radius:12px; padding:15px; margin:15px 0;">
      <p>Disponible Ã  rÃ©clamer</p>
      <h3 id="claimable-xp">0 XP</h3>
      <button onclick="claimReferralXP()" id="claim-btn">RÃ©clamer</button>
    </div>
    <h3>Tes Parrainages</h3>
    <p id="ref-count">ð¥ 0 amis invitÃ©s</p>
    <p id="ref-earned">0 XP total</p>
    <input type="text" id="ref-link" readonly style="width:100%; padding:6px;"/>
    <button onclick="copyReferralLink()">Copier</button>
  </div>
  <div id="screen-cards" class="screen">
    <h2>Cartes</h2>
    <button onclick="showCardCategory('solana')">Solana</button>
    <button onclick="showCardCategory('ethereum')">Ethereum</button>
    <button onclick="showCardCategory('memecoins')">MemeCoins</button>
    <div id="cards-solana" class="card-category">Solana: aucune carte dÃ©bloquÃ©e</div>
    <div id="cards-ethereum" class="card-category" style="display:none;">Ethereum: aucune carte dÃ©bloquÃ©e</div>
    <div id="cards-memecoins" class="card-category" style="display:none;">MemeCoins: aucune carte dÃ©bloquÃ©e</div>
  </div>
  <nav>
    <button onclick="showScreen('tap', event)" class="active">Tap</button>
    <button onclick="showScreen('missions', event)">Missions</button>
    <button onclick="showScreen('referral', event)">Referral</button>
    <button onclick="showScreen('cards', event)">Cartes</button>
  </nav>
  <script>
    let username = "guest";
    try {
      if (Telegram.WebApp && Telegram.WebApp.initDataUnsafe.user) {
        const u = Telegram.WebApp.initDataUnsafe.user;
        username = u.username || u.first_name || "ID" + u.id;
      }
    } catch(e) {}
    document.getElementById("user-id").innerText = "ð¤ " + username;
    const key = "aetherswap_" + username;
    const userData = JSON.parse(localStorage.getItem(key)) || { taps: 0, xp: 0, level: 1, lastDaily: 0 };
    const referralStats = { invited: 0, claimableXP: 0, totalXP: 0 };
    document.getElementById("ref-link").value = "https://t.me/AetherSwapBot?start=" + username;

    function saveData() { localStorage.setItem(key, JSON.stringify(userData)); }
    function updateUI() {
      document.getElementById("tap-count").innerText = userData.taps;
      document.getElementById("user-xp").innerText = userData.xp;
      document.getElementById("user-level").innerText = userData.level;
      document.getElementById("xp-fill").style.width = (userData.xp / (userData.level * 100)) * 100 + "%";
      document.getElementById("ref-count").innerText = `ð¥ ${referralStats.invited} amis invitÃ©s`;
      document.getElementById("ref-earned").innerText = `${referralStats.totalXP} XP total`;
      document.getElementById("claimable-xp").innerText = `${referralStats.claimableXP} XP`;
      document.getElementById("claim-btn").disabled = referralStats.claimableXP <= 0;
      checkDailyReward();
    }
    function tap() {
      userData.taps++; userData.xp++;
      if (userData.xp >= userData.level * 100) { userData.level++; userData.xp = 0; }
      saveData(); updateUI();
    }
    function connectWallet() {
      userData.xp += 500;
      alert("Wallet connectÃ© ! +500 XP");
      saveData(); updateUI();
    }
    function showScreen(id, e) {
      document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
      document.getElementById("screen-" + id).classList.add("active");
      document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
      e.target.closest("button").classList.add("active");
    }
    function showCardCategory(cat) {
      document.querySelectorAll(".card-category").forEach(c => c.style.display = "none");
      document.getElementById("cards-" + cat).style.display = "block";
    }
    function claimDailyReward() {
      const now = new Date(); const last = new Date(userData.lastDaily || 0);
      const hours = (now - last) / (1000 * 60 * 60);
      if (hours >= 24) {
        userData.xp += 100;
        userData.lastDaily = now;
        alert("+100 XP gagnÃ© !");
        saveData(); updateUI();
      } else alert("DÃ©jÃ  rÃ©clamÃ© aujourd'hui !");
    }
    function checkDailyReward() {
      const now = new Date(); const last = new Date(userData.lastDaily || 0);
      const hours = (now - last) / (1000 * 60 * 60);
      const btn = document.getElementById("daily-reward-btn");
      const msg = document.getElementById("daily-status");
      btn.disabled = hours < 24;
      msg.innerText = hours < 24 ? `Reviens dans ${Math.ceil(24 - hours)}h` : "Disponible !";
    }
    function claimReferralXP() {
      userData.xp += referralStats.claimableXP;
      referralStats.totalXP += referralStats.claimableXP;
      referralStats.claimableXP = 0;
      saveData(); updateUI();
      alert("+XP ajoutÃ© !");
    }
    function copyReferralLink() {
      navigator.clipboard.writeText(document.getElementById("ref-link").value);
      alert("Lien copiÃ© !");
    }
    setTimeout(() => document.getElementById("loading-screen").style.display = "none", 2500);
    updateUI();
  </script>
</body>
</html>
